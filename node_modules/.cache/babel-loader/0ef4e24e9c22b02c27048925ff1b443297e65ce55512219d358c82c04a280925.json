{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useStockAnalysis/index.js\nimport { useState } from 'react';\nimport { generateAnalysis } from '../../services/ollamaService';\nimport { parseResponse, generatePrompt } from '../../utils/helpers';\nexport const useStockAnalysis = () => {\n  _s();\n  const [analysis, setAnalysis] = useState({\n    technical: null,\n    fundamental: null,\n    sentiment: null\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const performAnalysis = async (type, stockSymbol, chartData) => {\n    if (!stockSymbol) {\n      setError('Please enter a stock symbol');\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const prompt = generatePrompt(type, stockSymbol);\n      const data = await generateAnalysis(prompt);\n      const analysisResult = parseResponse(data.response);\n      setAnalysis(prev => ({\n        ...prev,\n        [type]: analysisResult\n      }));\n    } catch (error) {\n      console.error('Analysis error:', error);\n      setError('Failed to perform analysis. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  // const performAnalysis = async (type) => {\n  //     setLoading(true);\n  //     // Simulate API call to LLM\n  //     setTimeout(() => {\n  //         const mockResponses = {\n  //             technical: {\n  //                 summary: \"Based on technical indicators, the stock shows a bullish trend with strong momentum. The 50-day moving average crossed above the 200-day moving average, forming a golden cross pattern.\",\n  //                 recommendation: \"Consider buying with a stop loss at $145\",\n  //                 indicators: {\n  //                     rsi: 65,\n  //                     macd: \"Positive\",\n  //                     movingAverages: \"Bullish\"\n  //                 },\n  //                 priceHistory: [\n  //                     { \"date\": \"2023-02-20\", \"price\": 180.21, \"volume\": 1234567 },\n  //                     { \"date\": \"2023-03-01\", \"price\": 182.15, \"volume\": 987654 },\n  //                     { \"date\": \"2023-03-15\", \"price\": 184.50, \"volume\": 456789 }\n  //                 ],\n  //                 signals: [\n  //                     { \"type\": \"bullish\", \"name\": \"Golden Cross\", \"description\": \"20-day MA crosses above 50-day MA\" },\n  //                     { \"type\": \"bearish\", \"name\": \"Death Cross\", \"description\": \"50-day MA crosses below 20-day MA\" }\n  //                 ],\n  //                 \"supportLevels\": [140.00, 135.00],\n  //                 \"resistanceLevels\": [190.00, 195.00]\n  //             },\n  //             fundamental: {\n  //                 summary: \"The company shows strong fundamentals with healthy profit margins and consistent revenue growth.\",\n  //                 metrics: {\n  //                     peRatio: 22.5,\n  //                     eps: 3.45,\n  //                     debtToEquity: 0.8\n  //                 },\n  //                 recommendation: \"Strong long-term investment potential\"\n  //             },\n  //             sentiment: {\n  //                 summary: \"Overall positive market sentiment with increasing institutional interest.\",\n  //                 metrics: {\n  //                     newsScore: 7.5,\n  //                     socialMediaBuzz: \"Positive\",\n  //                     analystRatings: \"Buy\"\n  //                 }\n  //             }\n  //         };\n\n  //         setAnalysis(prev => ({\n  //             ...prev,\n  //             [type]: mockResponses[type]\n  //         }));\n  //         setLoading(false);\n  //     }, 1500);\n  // };\n  return {\n    analysis,\n    loading,\n    error,\n    performAnalysis\n  };\n};\n_s(useStockAnalysis, \"hVN85ievMaeYJFB1t36/qiCg818=\");","map":{"version":3,"names":["useState","generateAnalysis","parseResponse","generatePrompt","useStockAnalysis","_s","analysis","setAnalysis","technical","fundamental","sentiment","loading","setLoading","error","setError","performAnalysis","type","stockSymbol","chartData","prompt","data","analysisResult","response","prev","console"],"sources":["/home/hsing/pro/stock-analysis-app/src/hooks/useStockAnalysis/index.js"],"sourcesContent":["// src/hooks/useStockAnalysis/index.js\nimport { useState } from 'react';\nimport { generateAnalysis } from '../../services/ollamaService';\nimport { parseResponse, generatePrompt } from '../../utils/helpers';\n\nexport const useStockAnalysis = () => {\n    const [analysis, setAnalysis] = useState({\n        technical: null,\n        fundamental: null,\n        sentiment: null\n    });\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n\n    const performAnalysis = async (type, stockSymbol, chartData) => {\n        if (!stockSymbol) {\n            setError('Please enter a stock symbol');\n            return;\n        }\n\n        setLoading(true);\n        setError(null);\n\n        try {\n            const prompt = generatePrompt(type, stockSymbol);\n            const data = await generateAnalysis(prompt);\n            const analysisResult = parseResponse(data.response);\n\n            setAnalysis(prev => ({\n                ...prev,\n                [type]: analysisResult\n            }));\n        } catch (error) {\n            console.error('Analysis error:', error);\n            setError('Failed to perform analysis. Please try again.');\n        } finally {\n            setLoading(false);\n        }\n    };\n    // const performAnalysis = async (type) => {\n    //     setLoading(true);\n    //     // Simulate API call to LLM\n    //     setTimeout(() => {\n    //         const mockResponses = {\n    //             technical: {\n    //                 summary: \"Based on technical indicators, the stock shows a bullish trend with strong momentum. The 50-day moving average crossed above the 200-day moving average, forming a golden cross pattern.\",\n    //                 recommendation: \"Consider buying with a stop loss at $145\",\n    //                 indicators: {\n    //                     rsi: 65,\n    //                     macd: \"Positive\",\n    //                     movingAverages: \"Bullish\"\n    //                 },\n    //                 priceHistory: [\n    //                     { \"date\": \"2023-02-20\", \"price\": 180.21, \"volume\": 1234567 },\n    //                     { \"date\": \"2023-03-01\", \"price\": 182.15, \"volume\": 987654 },\n    //                     { \"date\": \"2023-03-15\", \"price\": 184.50, \"volume\": 456789 }\n    //                 ],\n    //                 signals: [\n    //                     { \"type\": \"bullish\", \"name\": \"Golden Cross\", \"description\": \"20-day MA crosses above 50-day MA\" },\n    //                     { \"type\": \"bearish\", \"name\": \"Death Cross\", \"description\": \"50-day MA crosses below 20-day MA\" }\n    //                 ],\n    //                 \"supportLevels\": [140.00, 135.00],\n    //                 \"resistanceLevels\": [190.00, 195.00]\n    //             },\n    //             fundamental: {\n    //                 summary: \"The company shows strong fundamentals with healthy profit margins and consistent revenue growth.\",\n    //                 metrics: {\n    //                     peRatio: 22.5,\n    //                     eps: 3.45,\n    //                     debtToEquity: 0.8\n    //                 },\n    //                 recommendation: \"Strong long-term investment potential\"\n    //             },\n    //             sentiment: {\n    //                 summary: \"Overall positive market sentiment with increasing institutional interest.\",\n    //                 metrics: {\n    //                     newsScore: 7.5,\n    //                     socialMediaBuzz: \"Positive\",\n    //                     analystRatings: \"Buy\"\n    //                 }\n    //             }\n    //         };\n\n    //         setAnalysis(prev => ({\n    //             ...prev,\n    //             [type]: mockResponses[type]\n    //         }));\n    //         setLoading(false);\n    //     }, 1500);\n    // };\n    return { analysis, loading, error, performAnalysis };\n};"],"mappings":";AAAA;AACA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,gBAAgB,QAAQ,8BAA8B;AAC/D,SAASC,aAAa,EAAEC,cAAc,QAAQ,qBAAqB;AAEnE,OAAO,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAC;IACrCQ,SAAS,EAAE,IAAI;IACfC,WAAW,EAAE,IAAI;IACjBC,SAAS,EAAE;EACf,CAAC,CAAC;EACF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMe,eAAe,GAAG,MAAAA,CAAOC,IAAI,EAAEC,WAAW,EAAEC,SAAS,KAAK;IAC5D,IAAI,CAACD,WAAW,EAAE;MACdH,QAAQ,CAAC,6BAA6B,CAAC;MACvC;IACJ;IAEAF,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACA,MAAMK,MAAM,GAAGhB,cAAc,CAACa,IAAI,EAAEC,WAAW,CAAC;MAChD,MAAMG,IAAI,GAAG,MAAMnB,gBAAgB,CAACkB,MAAM,CAAC;MAC3C,MAAME,cAAc,GAAGnB,aAAa,CAACkB,IAAI,CAACE,QAAQ,CAAC;MAEnDf,WAAW,CAACgB,IAAI,KAAK;QACjB,GAAGA,IAAI;QACP,CAACP,IAAI,GAAGK;MACZ,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,OAAOR,KAAK,EAAE;MACZW,OAAO,CAACX,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;MACvCC,QAAQ,CAAC,+CAA+C,CAAC;IAC7D,CAAC,SAAS;MACNF,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EACD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,OAAO;IAAEN,QAAQ;IAAEK,OAAO;IAAEE,KAAK;IAAEE;EAAgB,CAAC;AACxD,CAAC;AAACV,EAAA,CAtFWD,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}